{"version":3,"file":"export-MLslLfUA.js","sources":["../../src/components/export/ExportView.tsx"],"sourcesContent":["import React, { useState } from 'react';\nimport { useStore } from '@/store';\nimport { getExportService } from '@/services/ExportService';\nimport { Button } from '@/components/common/Button';\nimport { Spinner } from '@/components/common/Spinner';\nimport type { PDFExportOptions, ImageExportOptions, ExportFormat } from '@/types';\n\nexport const ExportView: React.FC = () => {\n  const { currentDocument, setCurrentView, addToast } = useStore((state) => ({\n    currentDocument: state.documents.currentDocument,\n    setCurrentView: state.setCurrentView,\n    addToast: state.addToast,\n  }));\n\n  const [selectedFormat, setSelectedFormat] = useState<ExportFormat>('pdf');\n  const [isExporting, setIsExporting] = useState(false);\n  const [exportProgress, setExportProgress] = useState(0);\n  const [useFormattedText, setUseFormattedText] = useState(false);\n\n  // PDF options\n  const [pdfOptions, setPdfOptions] = useState<PDFExportOptions>({\n    pageSize: 'a4',\n    orientation: 'auto',\n    quality: 'high',\n    includeOCR: false,\n    compression: true,\n  });\n\n  // Image options\n  const [imageOptions, setImageOptions] = useState<ImageExportOptions>({\n    format: 'png',\n    quality: 90,\n  });\n\n  const exportService = getExportService();\n\n  const handleExport = async () => {\n    if (!currentDocument) {\n      addToast({\n        type: 'error',\n        message: 'No document to export',\n      });\n      return;\n    }\n\n    setIsExporting(true);\n    setExportProgress(0);\n\n    try {\n      let filename = `${currentDocument.name}`;\n\n      switch (selectedFormat) {\n        case 'pdf': {\n          setExportProgress(30);\n          const blob = await exportService.exportToPDF(currentDocument, pdfOptions);\n          setExportProgress(100);\n          filename += '.pdf';\n          exportService.downloadBlob(blob, filename);\n          addToast({\n            type: 'success',\n            message: 'PDF exported successfully',\n          });\n          break;\n        }\n\n        case 'png':\n        case 'jpeg': {\n          if (currentDocument.pages.length === 1) {\n            setExportProgress(50);\n            const blob = await exportService.exportToImage(\n              currentDocument.pages[0],\n              { ...imageOptions, format: selectedFormat }\n            );\n            setExportProgress(100);\n            filename += `.${selectedFormat}`;\n            exportService.downloadBlob(blob, filename);\n            addToast({\n              type: 'success',\n              message: `${selectedFormat.toUpperCase()} exported successfully`,\n            });\n          } else {\n            // Multiple pages - export as separate files\n            const blobs = await exportService.exportMultipleImages(\n              currentDocument,\n              { ...imageOptions, format: selectedFormat }\n            );\n\n            for (let i = 0; i < blobs.length; i++) {\n              setExportProgress(((i + 1) / blobs.length) * 100);\n              const pageFilename = `${currentDocument.name}_page${i + 1}.${selectedFormat}`;\n              exportService.downloadBlob(blobs[i], pageFilename);\n            }\n\n            addToast({\n              type: 'success',\n              message: `${blobs.length} images exported successfully`,\n            });\n          }\n          break;\n        }\n\n        case 'txt': {\n          setExportProgress(50);\n          const blob = await exportService.exportToText(currentDocument, useFormattedText);\n          setExportProgress(100);\n          filename += useFormattedText ? '.md' : '.txt';\n          exportService.downloadBlob(blob, filename);\n          addToast({\n            type: 'success',\n            message: useFormattedText ? 'Markdown exported successfully' : 'Text exported successfully',\n          });\n          break;\n        }\n      }\n    } catch (error) {\n      console.error('Export failed:', error);\n      addToast({\n        type: 'error',\n        message: error instanceof Error ? error.message : 'Export failed',\n      });\n    } finally {\n      setIsExporting(false);\n      setExportProgress(0);\n    }\n  };\n\n  const handleShare = async () => {\n    if (!currentDocument) return;\n\n    setIsExporting(true);\n\n    try {\n      let blob: Blob;\n      let filename: string;\n\n      switch (selectedFormat) {\n        case 'pdf':\n          blob = await exportService.exportToPDF(currentDocument, pdfOptions);\n          filename = `${currentDocument.name}.pdf`;\n          break;\n        case 'png':\n        case 'jpeg':\n          if (currentDocument.pages.length === 1) {\n            blob = await exportService.exportToImage(\n              currentDocument.pages[0],\n              { ...imageOptions, format: selectedFormat }\n            );\n            filename = `${currentDocument.name}.${selectedFormat}`;\n          } else {\n            addToast({\n              type: 'warning',\n              message: 'Can only share single-page documents. Export multiple pages separately.',\n            });\n            return;\n          }\n          break;\n        case 'txt':\n          blob = await exportService.exportToText(currentDocument, useFormattedText);\n          filename = `${currentDocument.name}.${useFormattedText ? 'md' : 'txt'}`;\n          break;\n        default:\n          throw new Error('Invalid format');\n      }\n\n      await exportService.share(blob, filename, currentDocument.name);\n      addToast({\n        type: 'success',\n        message: 'Shared successfully',\n      });\n    } catch (error) {\n      console.error('Share failed:', error);\n      if (error instanceof Error && error.message.includes('not supported')) {\n        // Fallback to download\n        handleExport();\n      } else {\n        addToast({\n          type: 'error',\n          message: 'Share failed',\n        });\n      }\n    } finally {\n      setIsExporting(false);\n    }\n  };\n\n  if (!currentDocument) {\n    return (\n      <div className=\"flex flex-col items-center justify-center h-full bg-gray-50 p-6\">\n        <div className=\"text-6xl mb-4\">üì§</div>\n        <h2 className=\"text-xl font-semibold mb-2\">No Document Selected</h2>\n        <p className=\"text-sm text-gray-600 mb-6 text-center max-w-md\">\n          Select a document from your library to export it.\n        </p>\n        <Button onClick={() => setCurrentView('documents')} variant=\"primary\" size=\"lg\">\n          Go to Documents\n        </Button>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"h-full bg-white overflow-y-auto\">\n      <div className=\"max-w-2xl mx-auto p-6\">\n        {/* Document Info */}\n        <div className=\"mb-6\">\n          <h2 className=\"text-2xl font-bold mb-2\">{currentDocument.name}</h2>\n          <p className=\"text-sm text-gray-600\">\n            {currentDocument.pages.length} page{currentDocument.pages.length !== 1 ? 's' : ''}\n            {currentDocument.metadata.hasOCR && ' ‚Ä¢ OCR processed'}\n          </p>\n        </div>\n\n        {/* Format Selection */}\n        <div className=\"mb-6\">\n          <label className=\"block text-sm font-medium text-gray-700 mb-3\">\n            Export Format\n          </label>\n          <div className=\"grid grid-cols-2 gap-3\">\n            <button\n              onClick={() => setSelectedFormat('pdf')}\n              className={`p-4 rounded-lg border-2 transition-all ${\n                selectedFormat === 'pdf'\n                  ? 'border-blue-600 bg-blue-50'\n                  : 'border-gray-200 hover:border-gray-300'\n              }`}\n            >\n              <div className=\"text-3xl mb-2\">üìÑ</div>\n              <div className=\"font-medium\">PDF</div>\n              <div className=\"text-xs text-gray-600\">Multi-page document</div>\n            </button>\n\n            <button\n              onClick={() => setSelectedFormat('png')}\n              className={`p-4 rounded-lg border-2 transition-all ${\n                selectedFormat === 'png'\n                  ? 'border-blue-600 bg-blue-50'\n                  : 'border-gray-200 hover:border-gray-300'\n              }`}\n            >\n              <div className=\"text-3xl mb-2\">üñºÔ∏è</div>\n              <div className=\"font-medium\">PNG</div>\n              <div className=\"text-xs text-gray-600\">Lossless image</div>\n            </button>\n\n            <button\n              onClick={() => setSelectedFormat('jpeg')}\n              className={`p-4 rounded-lg border-2 transition-all ${\n                selectedFormat === 'jpeg'\n                  ? 'border-blue-600 bg-blue-50'\n                  : 'border-gray-200 hover:border-gray-300'\n              }`}\n            >\n              <div className=\"text-3xl mb-2\">üì∑</div>\n              <div className=\"font-medium\">JPEG</div>\n              <div className=\"text-xs text-gray-600\">Compressed image</div>\n            </button>\n\n            <button\n              onClick={() => setSelectedFormat('txt')}\n              className={`p-4 rounded-lg border-2 transition-all ${\n                selectedFormat === 'txt'\n                  ? 'border-blue-600 bg-blue-50'\n                  : 'border-gray-200 hover:border-gray-300'\n              }`}\n              disabled={!currentDocument.metadata.hasOCR}\n            >\n              <div className=\"text-3xl mb-2\">üìù</div>\n              <div className=\"font-medium\">Text</div>\n              <div className=\"text-xs text-gray-600\">\n                {currentDocument.metadata.hasOCR ? 'OCR text only' : 'OCR required'}\n              </div>\n            </button>\n          </div>\n        </div>\n\n        {/* Export Presets */}\n        <div className=\"mb-6\">\n          <label className=\"block text-sm font-medium text-gray-700 mb-3\">\n            Quick Presets\n          </label>\n          <div className=\"grid grid-cols-3 gap-2\">\n            <button\n              onClick={() => {\n                setSelectedFormat('pdf');\n                setPdfOptions({\n                  ...pdfOptions,\n                  pageSize: 'a4',\n                  quality: 'high',\n                  includeOCR: currentDocument?.metadata.hasOCR || false,\n                });\n              }}\n              className=\"p-3 text-sm border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors\"\n            >\n              üìß Email\n              <div className=\"text-xs text-gray-500 mt-1\">PDF ‚Ä¢ High quality</div>\n            </button>\n\n            <button\n              onClick={() => {\n                setSelectedFormat('pdf');\n                setPdfOptions({\n                  ...pdfOptions,\n                  pageSize: 'a4',\n                  quality: 'medium',\n                  includeOCR: false,\n                });\n              }}\n              className=\"p-3 text-sm border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors\"\n            >\n              üñ®Ô∏è Print\n              <div className=\"text-xs text-gray-500 mt-1\">PDF ‚Ä¢ A4 ‚Ä¢ Medium</div>\n            </button>\n\n            <button\n              onClick={() => {\n                setSelectedFormat('pdf');\n                setPdfOptions({\n                  ...pdfOptions,\n                  pageSize: 'original',\n                  quality: 'original',\n                  includeOCR: currentDocument?.metadata.hasOCR || false,\n                });\n              }}\n              className=\"p-3 text-sm border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors\"\n            >\n              üíæ Archive\n              <div className=\"text-xs text-gray-500 mt-1\">PDF ‚Ä¢ Original</div>\n            </button>\n\n            <button\n              onClick={() => {\n                setSelectedFormat('jpeg');\n                setImageOptions({\n                  format: 'jpeg',\n                  quality: 80,\n                  maxDimension: 1920,\n                });\n              }}\n              className=\"p-3 text-sm border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors\"\n            >\n              üì± Mobile\n              <div className=\"text-xs text-gray-500 mt-1\">JPEG ‚Ä¢ Optimized</div>\n            </button>\n\n            <button\n              onClick={() => {\n                setSelectedFormat('png');\n                setImageOptions({\n                  format: 'png',\n                  quality: 100,\n                });\n              }}\n              className=\"p-3 text-sm border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors\"\n            >\n              üé® Design\n              <div className=\"text-xs text-gray-500 mt-1\">PNG ‚Ä¢ Lossless</div>\n            </button>\n\n            {currentDocument?.metadata.hasOCR && (\n              <button\n                onClick={() => {\n                  setSelectedFormat('txt');\n                  setUseFormattedText(true);\n                }}\n                className=\"p-3 text-sm border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors\"\n              >\n                üìù Notes\n                <div className=\"text-xs text-gray-500 mt-1\">Markdown ‚Ä¢ Text</div>\n              </button>\n            )}\n          </div>\n        </div>\n\n        {/* PDF Options */}\n        {selectedFormat === 'pdf' && (\n          <div className=\"mb-6 p-4 bg-gray-50 rounded-lg\">\n            <h3 className=\"font-medium mb-3\">PDF Options</h3>\n\n            <div className=\"space-y-4\">\n              <div>\n                <label className=\"block text-sm text-gray-700 mb-2\">Page Size</label>\n                <select\n                  value={pdfOptions.pageSize}\n                  onChange={(e) =>\n                    setPdfOptions({ ...pdfOptions, pageSize: e.target.value as any })\n                  }\n                  className=\"w-full px-3 py-2 border border-gray-300 rounded-lg\"\n                >\n                  <option value=\"a4\">A4</option>\n                  <option value=\"letter\">Letter</option>\n                  <option value=\"legal\">Legal</option>\n                  <option value=\"original\">Original Size</option>\n                </select>\n              </div>\n\n              <div>\n                <label className=\"block text-sm text-gray-700 mb-2\">Orientation</label>\n                <select\n                  value={pdfOptions.orientation}\n                  onChange={(e) =>\n                    setPdfOptions({ ...pdfOptions, orientation: e.target.value as any })\n                  }\n                  className=\"w-full px-3 py-2 border border-gray-300 rounded-lg\"\n                >\n                  <option value=\"auto\">Auto</option>\n                  <option value=\"portrait\">Portrait</option>\n                  <option value=\"landscape\">Landscape</option>\n                </select>\n              </div>\n\n              <div>\n                <label className=\"block text-sm text-gray-700 mb-2\">Quality</label>\n                <select\n                  value={pdfOptions.quality}\n                  onChange={(e) =>\n                    setPdfOptions({ ...pdfOptions, quality: e.target.value as any })\n                  }\n                  className=\"w-full px-3 py-2 border border-gray-300 rounded-lg\"\n                >\n                  <option value=\"low\">Low (smaller file)</option>\n                  <option value=\"medium\">Medium</option>\n                  <option value=\"high\">High</option>\n                  <option value=\"original\">Original</option>\n                </select>\n              </div>\n\n              {currentDocument.metadata.hasOCR && (\n                <label className=\"flex items-center gap-2\">\n                  <input\n                    type=\"checkbox\"\n                    checked={pdfOptions.includeOCR}\n                    onChange={(e) =>\n                      setPdfOptions({ ...pdfOptions, includeOCR: e.target.checked })\n                    }\n                    className=\"rounded border-gray-300\"\n                  />\n                  <span className=\"text-sm text-gray-700\">\n                    Include OCR text layer (searchable PDF)\n                  </span>\n                </label>\n              )}\n            </div>\n          </div>\n        )}\n\n        {/* Image Options */}\n        {(selectedFormat === 'png' || selectedFormat === 'jpeg') && (\n          <div className=\"mb-6 p-4 bg-gray-50 rounded-lg\">\n            <h3 className=\"font-medium mb-3\">Image Options</h3>\n\n            <div className=\"space-y-4\">\n              {selectedFormat === 'jpeg' && (\n                <div>\n                  <label className=\"block text-sm text-gray-700 mb-2\">\n                    Quality: {imageOptions.quality}%\n                  </label>\n                  <input\n                    type=\"range\"\n                    min=\"10\"\n                    max=\"100\"\n                    step=\"10\"\n                    value={imageOptions.quality}\n                    onChange={(e) =>\n                      setImageOptions({ ...imageOptions, quality: parseInt(e.target.value) })\n                    }\n                    className=\"w-full\"\n                  />\n                </div>\n              )}\n\n              <div>\n                <label className=\"flex items-center gap-2\">\n                  <input\n                    type=\"checkbox\"\n                    checked={imageOptions.maxDimension !== undefined}\n                    onChange={(e) =>\n                      setImageOptions({\n                        ...imageOptions,\n                        maxDimension: e.target.checked ? 2048 : undefined,\n                      })\n                    }\n                    className=\"rounded border-gray-300\"\n                  />\n                  <span className=\"text-sm text-gray-700\">Limit maximum dimension</span>\n                </label>\n                {imageOptions.maxDimension !== undefined && (\n                  <input\n                    type=\"number\"\n                    value={imageOptions.maxDimension}\n                    onChange={(e) =>\n                      setImageOptions({\n                        ...imageOptions,\n                        maxDimension: parseInt(e.target.value),\n                      })\n                    }\n                    className=\"w-full mt-2 px-3 py-2 border border-gray-300 rounded-lg\"\n                    placeholder=\"Max dimension (px)\"\n                  />\n                )}\n              </div>\n            </div>\n          </div>\n        )}\n\n        {/* Text Options */}\n        {selectedFormat === 'txt' && (\n          <div className=\"mb-6 p-4 bg-gray-50 rounded-lg\">\n            <h3 className=\"font-medium mb-3\">Text Options</h3>\n\n            <div className=\"space-y-4\">\n              <label className=\"flex items-center gap-2\">\n                <input\n                  type=\"checkbox\"\n                  checked={useFormattedText}\n                  onChange={(e) => setUseFormattedText(e.target.checked)}\n                  className=\"rounded border-gray-300\"\n                />\n                <span className=\"text-sm text-gray-700\">\n                  Export as Markdown (formatted with headings and metadata)\n                </span>\n              </label>\n\n              <div className=\"text-xs text-gray-600 bg-white p-3 rounded border border-gray-200\">\n                {useFormattedText ? (\n                  <>\n                    <strong>Markdown format:</strong> Includes document title, creation date,\n                    page headings, and confidence scores. Perfect for documentation or note-taking apps.\n                  </>\n                ) : (\n                  <>\n                    <strong>Plain text format:</strong> Simple text output with page separators.\n                    Compatible with any text editor.\n                  </>\n                )}\n              </div>\n            </div>\n          </div>\n        )}\n\n        {/* Document Preview */}\n        {!isExporting && (\n          <div className=\"mb-6 p-4 bg-gray-50 rounded-lg\">\n            <h3 className=\"font-medium mb-3\">Document Preview</h3>\n            <div className=\"grid grid-cols-3 gap-2\">\n              {currentDocument.pages.slice(0, 6).map((page) => (\n                <div key={page.id} className=\"aspect-[3/4] bg-gray-200 rounded overflow-hidden relative\">\n                  <img\n                    src={URL.createObjectURL(page.thumbnailImage)}\n                    alt={`Page ${page.pageNumber}`}\n                    className=\"w-full h-full object-cover\"\n                  />\n                  <div className=\"absolute bottom-1 left-1 px-1.5 py-0.5 bg-black/70 text-white text-xs rounded\">\n                    {page.pageNumber}\n                  </div>\n                </div>\n              ))}\n              {currentDocument.pages.length > 6 && (\n                <div className=\"aspect-[3/4] bg-gray-300 rounded flex items-center justify-center text-gray-600 text-sm\">\n                  +{currentDocument.pages.length - 6} more\n                </div>\n              )}\n            </div>\n          </div>\n        )}\n\n        {/* Progress */}\n        {isExporting && (\n          <div className=\"mb-6\">\n            <div className=\"flex items-center justify-between mb-2\">\n              <span className=\"text-sm text-gray-600\">Exporting...</span>\n              <span className=\"text-sm text-gray-600\">{Math.round(exportProgress)}%</span>\n            </div>\n            <div className=\"w-full bg-gray-200 rounded-full h-2\">\n              <div\n                className=\"bg-blue-600 h-2 rounded-full transition-all duration-300\"\n                style={{ width: `${exportProgress}%` }}\n              />\n            </div>\n          </div>\n        )}\n\n        {/* Action Buttons */}\n        <div className=\"flex gap-3\">\n          <Button\n            onClick={handleExport}\n            disabled={isExporting}\n            variant=\"primary\"\n            size=\"lg\"\n            className=\"flex-1\"\n          >\n            {isExporting ? (\n              <span className=\"flex items-center justify-center gap-2\">\n                <Spinner size=\"sm\" />\n                Exporting...\n              </span>\n            ) : (\n              `Export as ${selectedFormat.toUpperCase()}`\n            )}\n          </Button>\n\n          {typeof navigator.share !== 'undefined' && (\n            <Button\n              onClick={handleShare}\n              disabled={isExporting}\n              variant=\"secondary\"\n              size=\"lg\"\n            >\n              üì§ Share\n            </Button>\n          )}\n        </div>\n      </div>\n    </div>\n  );\n};\n"],"names":["ExportView","currentDocument","setCurrentView","addToast","useStore","state","documents","selectedFormat","setSelectedFormat","useState","isExporting","setIsExporting","exportProgress","setExportProgress","useFormattedText","setUseFormattedText","pdfOptions","setPdfOptions","pageSize","orientation","quality","includeOCR","compression","imageOptions","setImageOptions","format","exportService","getExportService","handleExport","async","filename","name","blob","exportToPDF","downloadBlob","type","message","pages","length","exportToImage","toUpperCase","blobs","exportMultipleImages","i","pageFilename","exportToText","error","Error","className","children","jsxs","jsx","metadata","hasOCR","onClick","disabled","maxDimension","value","onChange","e","target","checked","min","max","step","parseInt","placeholder","Fragment","slice","map","page","src","URL","createObjectURL","thumbnailImage","alt","pageNumber","id","Math","round","style","width","Button","variant","size","Spinner","navigator","share","includes"],"mappings":"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"}