var e=Object.defineProperty,r=(r,t,s)=>((r,t,s)=>t in r?e(r,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):r[t]=s)(r,"symbol"!=typeof t?t+"":t,s);import{r as t,j as s,a as n,R as o}from"./react-vendor-DmQDSmdE.js";import{B as i,u as a,C as c}from"./camera-BXopByFL.js";import{C as l}from"./crop-4K-W15B3.js";import{E as d}from"./enhance-CM9bPARJ.js";import{D as m,a as u}from"./documents-rJBaLL2-.js";import{O as f}from"./ocr-BMGSJCyW.js";import{E as h}from"./export-DlJdqM9w.js";import"./vendor-DsI9Cwdy.js";import"./zustand-vendor-CAwqQeLl.js";import"./services-B6435NxM.js";import"./db-vendor-7JQXQzuE.js";import"./zip-vendor-BnyUYtAy.js";import"./tesseract-vendor-C8JZVqR3.js";import"./pdf-vendor-5ANuJY33.js";!function(){const e=document.createElement("link").relList;if(!(e&&e.supports&&e.supports("modulepreload"))){for(const e of document.querySelectorAll('link[rel="modulepreload"]'))r(e);new MutationObserver(e=>{for(const t of e)if("childList"===t.type)for(const e of t.addedNodes)"LINK"===e.tagName&&"modulepreload"===e.rel&&r(e)}).observe(document,{childList:!0,subtree:!0})}function r(e){if(e.ep)return;e.ep=!0;const r=function(e){const r={};return e.integrity&&(r.integrity=e.integrity),e.referrerPolicy&&(r.referrerPolicy=e.referrerPolicy),"use-credentials"===e.crossOrigin?r.credentials="include":"anonymous"===e.crossOrigin?r.credentials="omit":r.credentials="same-origin",r}(e);fetch(e.href,r)}}();class x extends t.Component{constructor(e){super(e),r(this,"handleReset",()=>{this.setState({hasError:!1,error:null,errorInfo:null})}),r(this,"handleReload",()=>{window.location.reload()}),this.state={hasError:!1,error:null,errorInfo:null}}static getDerivedStateFromError(e){return{hasError:!0,error:e}}componentDidCatch(e,r){this.setState({error:e,errorInfo:r}),this.props.onError&&this.props.onError(e,r)}render(){return this.state.hasError?this.props.fallback?this.props.fallback:s.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50 px-4",children:s.jsxs("div",{className:"max-w-md w-full bg-white rounded-lg shadow-lg p-6",children:[s.jsx("div",{className:"flex items-center justify-center w-12 h-12 mx-auto bg-red-100 rounded-full mb-4",children:s.jsx("svg",{className:"w-6 h-6 text-red-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})})}),s.jsx("h2",{className:"text-xl font-semibold text-gray-900 text-center mb-2",children:"Something went wrong"}),s.jsx("p",{className:"text-gray-600 text-center mb-6",children:"We're sorry for the inconvenience. The application encountered an unexpected error."}),!1,s.jsxs("div",{className:"flex gap-3",children:[s.jsx(i,{onClick:this.handleReset,variant:"outline",className:"flex-1",children:"Try Again"}),s.jsx(i,{onClick:this.handleReload,variant:"primary",className:"flex-1",children:"Reload App"})]})]})}):this.props.children}}function p(){const{isOffline:e}=function(){const[e,r]=t.useState("undefined"==typeof navigator||navigator.onLine);return t.useEffect(()=>{const e=()=>{r(!0)},t=()=>{r(!1)};window.addEventListener("online",e),window.addEventListener("offline",t);const s=setInterval(async()=>{try{const e=await fetch("/favicon.ico",{method:"HEAD",cache:"no-cache"});r(e.ok)}catch{r(!1)}},3e4);return()=>{window.removeEventListener("online",e),window.removeEventListener("offline",t),clearInterval(s)}},[]),{isOnline:e,isOffline:!e}}(),[r,n]=t.useState(!1);return t.useEffect(()=>{if(e){const e=setTimeout(()=>n(!0),300);return()=>clearTimeout(e)}n(!1)},[e]),r?s.jsx("div",{className:"fixed top-14 left-0 right-0 z-50 bg-yellow-500 text-white px-4 py-2 text-sm font-medium text-center shadow-md",role:"alert","aria-live":"polite",children:s.jsxs("div",{className:"flex items-center justify-center gap-2",children:[s.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24","aria-hidden":"true",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M18.364 5.636a9 9 0 010 12.728m0 0l-2.829-2.829m2.829 2.829L21 21M15.536 8.464a5 5 0 010 7.072m0 0l-2.829-2.829m-4.243 2.829a4.978 4.978 0 01-1.414-2.83m-1.414 5.658a9 9 0 01-2.167-9.238m7.824 2.167a1 1 0 111.414 1.414m-1.414-1.414L3 3m8.293 8.293l1.414 1.414"})}),s.jsx("span",{children:"You're offline. Some features may not be available."})]})}):null}const j=()=>{const e=a(e=>e.ui.currentView);return s.jsx("header",{className:"fixed top-0 left-0 right-0 z-30 bg-white border-b border-gray-200 pt-safe",children:s.jsxs("div",{className:"flex items-center justify-between px-4 h-14",children:[s.jsx("h1",{className:"text-lg font-semibold text-gray-900",children:(()=>{switch(e){case"camera":default:return"Document Scanner";case"crop":return"Crop Document";case"enhance":return"Enhance";case"ocr":return"Extract Text";case"documents":return"My Documents";case"export":return"Export"}})()}),s.jsx("div",{className:"flex items-center gap-2"})]})})},v=()=>{const e=a(e=>e.ui.currentView),r=a(e=>e.setCurrentView);return s.jsx("nav",{className:"fixed bottom-0 left-0 right-0 z-30 bg-white border-t border-gray-200 pb-safe",children:s.jsx("div",{className:"flex items-center justify-around h-16",children:[{view:"camera",label:"Camera",icon:"ðŸ“·"},{view:"documents",label:"Documents",icon:"ðŸ“„"}].map(t=>s.jsxs("button",{onClick:()=>r(t.view),className:"flex flex-col items-center justify-center flex-1 h-full transition-colors "+(e===t.view?"text-primary-600":"text-gray-500 hover:text-gray-700"),children:[s.jsx("span",{className:"text-2xl mb-1",children:t.icon}),s.jsx("span",{className:"text-xs font-medium",children:t.label})]},t.view))})})},g=({toast:e})=>{const r=a(e=>e.removeToast);t.useEffect(()=>{const t=e.duration||3e3,s=setTimeout(()=>{r(e.id)},t);return()=>clearTimeout(s)},[e.id,e.duration,r]);return s.jsx("div",{className:`toast ${{success:"toast-success",error:"toast-error",warning:"toast-warning",info:"toast-info"}[e.type]} mb-2`,children:s.jsx("p",{className:"text-sm font-medium",children:e.message})})},w=()=>{const e=a(e=>e.ui.toasts);return 0===e.length?null:s.jsx("div",{className:"fixed top-4 right-4 z-50 space-y-2",children:e.map(e=>s.jsx(g,{toast:e},e.id))})};function b(){const e=a(e=>e.ui.currentView);return s.jsx(x,{children:s.jsxs("div",{className:"flex flex-col h-screen overflow-hidden bg-white",children:[s.jsx(j,{}),s.jsx(p,{}),s.jsx("main",{className:"flex-1 overflow-hidden mt-14 mb-16",children:(()=>{switch(e){case"camera":default:return s.jsx(c,{});case"crop":return s.jsx(l,{});case"enhance":return s.jsx(d,{});case"documents":return s.jsx(u,{});case"detail":return s.jsx(m,{});case"ocr":return s.jsx(f,{});case"export":return s.jsx(h,{})}})()}),s.jsx(v,{}),s.jsx(w,{})]})})}n.createRoot(document.getElementById("root")).render(s.jsx(o.StrictMode,{children:s.jsx(b,{})}));
