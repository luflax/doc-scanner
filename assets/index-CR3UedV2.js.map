{"version":3,"file":"index-CR3UedV2.js","sources":["../../src/components/common/ErrorBoundary.tsx","../../src/components/common/OfflineIndicator.tsx","../../src/hooks/useOfflineStatus.ts","../../src/components/layout/Header.tsx","../../src/components/layout/BottomNavigation.tsx","../../src/components/common/Toast.tsx","../../src/app/App.tsx","../../src/main.tsx"],"sourcesContent":["import React, { Component, ErrorInfo, ReactNode } from 'react';\nimport { Button } from './Button';\n\ninterface Props {\n  children: ReactNode;\n  fallback?: ReactNode;\n  onError?: (error: Error, errorInfo: ErrorInfo) => void;\n}\n\ninterface State {\n  hasError: boolean;\n  error: Error | null;\n  errorInfo: ErrorInfo | null;\n}\n\n/**\n * ErrorBoundary Component\n * Catches JavaScript errors anywhere in the child component tree\n */\nexport class ErrorBoundary extends Component<Props, State> {\n  constructor(props: Props) {\n    super(props);\n    this.state = {\n      hasError: false,\n      error: null,\n      errorInfo: null,\n    };\n  }\n\n  static getDerivedStateFromError(error: Error): Partial<State> {\n    return { hasError: true, error };\n  }\n\n  componentDidCatch(error: Error, errorInfo: ErrorInfo): void {\n    console.error('ErrorBoundary caught an error:', error, errorInfo);\n\n    this.setState({\n      error,\n      errorInfo,\n    });\n\n    // Call optional error callback\n    if (this.props.onError) {\n      this.props.onError(error, errorInfo);\n    }\n\n    // Log to external service in production\n    if (import.meta.env.MODE === 'production') {\n      // TODO: Log to error tracking service (e.g., Sentry)\n      console.error('Production error:', {\n        error: error.toString(),\n        componentStack: errorInfo.componentStack,\n        userAgent: navigator.userAgent,\n        timestamp: new Date().toISOString(),\n      });\n    }\n  }\n\n  handleReset = (): void => {\n    this.setState({\n      hasError: false,\n      error: null,\n      errorInfo: null,\n    });\n  };\n\n  handleReload = (): void => {\n    window.location.reload();\n  };\n\n  render(): ReactNode {\n    if (this.state.hasError) {\n      // Custom fallback UI if provided\n      if (this.props.fallback) {\n        return this.props.fallback;\n      }\n\n      // Default error UI\n      return (\n        <div className=\"min-h-screen flex items-center justify-center bg-gray-50 px-4\">\n          <div className=\"max-w-md w-full bg-white rounded-lg shadow-lg p-6\">\n            <div className=\"flex items-center justify-center w-12 h-12 mx-auto bg-red-100 rounded-full mb-4\">\n              <svg\n                className=\"w-6 h-6 text-red-600\"\n                fill=\"none\"\n                stroke=\"currentColor\"\n                viewBox=\"0 0 24 24\"\n              >\n                <path\n                  strokeLinecap=\"round\"\n                  strokeLinejoin=\"round\"\n                  strokeWidth={2}\n                  d=\"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z\"\n                />\n              </svg>\n            </div>\n\n            <h2 className=\"text-xl font-semibold text-gray-900 text-center mb-2\">\n              Something went wrong\n            </h2>\n\n            <p className=\"text-gray-600 text-center mb-6\">\n              We're sorry for the inconvenience. The application encountered an unexpected error.\n            </p>\n\n            {import.meta.env.MODE === 'development' && this.state.error && (\n              <div className=\"mb-6 p-4 bg-gray-100 rounded-lg overflow-auto max-h-48\">\n                <p className=\"text-sm font-mono text-red-600 mb-2\">\n                  {this.state.error.toString()}\n                </p>\n                {this.state.errorInfo && (\n                  <pre className=\"text-xs text-gray-700 overflow-auto\">\n                    {this.state.errorInfo.componentStack}\n                  </pre>\n                )}\n              </div>\n            )}\n\n            <div className=\"flex gap-3\">\n              <Button\n                onClick={this.handleReset}\n                variant=\"outline\"\n                className=\"flex-1\"\n              >\n                Try Again\n              </Button>\n              <Button\n                onClick={this.handleReload}\n                variant=\"primary\"\n                className=\"flex-1\"\n              >\n                Reload App\n              </Button>\n            </div>\n          </div>\n        </div>\n      );\n    }\n\n    return this.props.children;\n  }\n}\n","import { useOfflineStatus } from '@/hooks/useOfflineStatus';\nimport { useEffect, useState } from 'react';\n\n/**\n * OfflineIndicator Component\n * Displays a banner when the app is offline\n */\nexport function OfflineIndicator() {\n  const { isOffline } = useOfflineStatus();\n  const [show, setShow] = useState(false);\n\n  useEffect(() => {\n    if (isOffline) {\n      // Show indicator after a short delay to avoid flickering\n      const timer = setTimeout(() => setShow(true), 300);\n      return () => clearTimeout(timer);\n    } else {\n      setShow(false);\n    }\n  }, [isOffline]);\n\n  if (!show) return null;\n\n  return (\n    <div\n      className=\"fixed top-14 left-0 right-0 z-50 bg-yellow-500 text-white px-4 py-2 text-sm font-medium text-center shadow-md\"\n      role=\"alert\"\n      aria-live=\"polite\"\n    >\n      <div className=\"flex items-center justify-center gap-2\">\n        <svg\n          className=\"w-5 h-5\"\n          fill=\"none\"\n          stroke=\"currentColor\"\n          viewBox=\"0 0 24 24\"\n          aria-hidden=\"true\"\n        >\n          <path\n            strokeLinecap=\"round\"\n            strokeLinejoin=\"round\"\n            strokeWidth={2}\n            d=\"M18.364 5.636a9 9 0 010 12.728m0 0l-2.829-2.829m2.829 2.829L21 21M15.536 8.464a5 5 0 010 7.072m0 0l-2.829-2.829m-4.243 2.829a4.978 4.978 0 01-1.414-2.83m-1.414 5.658a9 9 0 01-2.167-9.238m7.824 2.167a1 1 0 111.414 1.414m-1.414-1.414L3 3m8.293 8.293l1.414 1.414\"\n          />\n        </svg>\n        <span>You're offline. Some features may not be available.</span>\n      </div>\n    </div>\n  );\n}\n","import { useState, useEffect } from 'react';\n\n/**\n * Hook to track online/offline status\n * @returns boolean indicating if the device is online\n */\nexport function useOfflineStatus(): { isOnline: boolean; isOffline: boolean } {\n  const [isOnline, setIsOnline] = useState<boolean>(\n    typeof navigator !== 'undefined' ? navigator.onLine : true\n  );\n\n  useEffect(() => {\n    const handleOnline = (): void => {\n      setIsOnline(true);\n      console.log('Network: Online');\n    };\n\n    const handleOffline = (): void => {\n      setIsOnline(false);\n      console.log('Network: Offline');\n    };\n\n    // Add event listeners\n    window.addEventListener('online', handleOnline);\n    window.addEventListener('offline', handleOffline);\n\n    // Periodic connectivity check (optional, for more reliable detection)\n    const checkConnectivity = async (): Promise<void> => {\n      try {\n        // Try to fetch a small resource to verify actual connectivity\n        const response = await fetch('/favicon.ico', {\n          method: 'HEAD',\n          cache: 'no-cache',\n        });\n        setIsOnline(response.ok);\n      } catch {\n        setIsOnline(false);\n      }\n    };\n\n    // Check connectivity every 30 seconds\n    const intervalId = setInterval(checkConnectivity, 30000);\n\n    // Cleanup\n    return () => {\n      window.removeEventListener('online', handleOnline);\n      window.removeEventListener('offline', handleOffline);\n      clearInterval(intervalId);\n    };\n  }, []);\n\n  return {\n    isOnline,\n    isOffline: !isOnline,\n  };\n}\n","import React from 'react';\nimport { useStore } from '@/store';\n\nexport const Header: React.FC = () => {\n  const currentView = useStore((state) => state.ui.currentView);\n\n  const getTitle = () => {\n    switch (currentView) {\n      case 'camera':\n        return 'Document Scanner';\n      case 'crop':\n        return 'Crop Document';\n      case 'enhance':\n        return 'Enhance';\n      case 'ocr':\n        return 'Extract Text';\n      case 'documents':\n        return 'My Documents';\n      case 'export':\n        return 'Export';\n      default:\n        return 'Document Scanner';\n    }\n  };\n\n  return (\n    <header className=\"fixed top-0 left-0 right-0 z-30 bg-white border-b border-gray-200 pt-safe\">\n      <div className=\"flex items-center justify-between px-4 h-14\">\n        <h1 className=\"text-lg font-semibold text-gray-900\">{getTitle()}</h1>\n        <div className=\"flex items-center gap-2\">\n          {/* Placeholder for menu/settings buttons */}\n        </div>\n      </div>\n    </header>\n  );\n};\n","import React from 'react';\nimport { useStore } from '@/store';\nimport type { ViewType } from '@/types';\n\nexport const BottomNavigation: React.FC = () => {\n  const currentView = useStore((state) => state.ui.currentView);\n  const setCurrentView = useStore((state) => state.setCurrentView);\n\n  const navItems: Array<{ view: ViewType; label: string; icon: string }> = [\n    { view: 'camera', label: 'Camera', icon: 'ðŸ“·' },\n    { view: 'documents', label: 'Documents', icon: 'ðŸ“„' },\n  ];\n\n  return (\n    <nav className=\"fixed bottom-0 left-0 right-0 z-30 bg-white border-t border-gray-200 pb-safe\">\n      <div className=\"flex items-center justify-around h-16\">\n        {navItems.map((item) => (\n          <button\n            key={item.view}\n            onClick={() => setCurrentView(item.view)}\n            className={`flex flex-col items-center justify-center flex-1 h-full transition-colors ${\n              currentView === item.view\n                ? 'text-primary-600'\n                : 'text-gray-500 hover:text-gray-700'\n            }`}\n          >\n            <span className=\"text-2xl mb-1\">{item.icon}</span>\n            <span className=\"text-xs font-medium\">{item.label}</span>\n          </button>\n        ))}\n      </div>\n    </nav>\n  );\n};\n","import React, { useEffect } from 'react';\nimport { useStore } from '@/store';\nimport type { Toast as ToastType } from '@/types';\n\nconst ToastItem: React.FC<{ toast: ToastType }> = ({ toast }) => {\n  const removeToast = useStore((state) => state.removeToast);\n\n  useEffect(() => {\n    const duration = toast.duration || 3000;\n    const timer = setTimeout(() => {\n      removeToast(toast.id);\n    }, duration);\n\n    return () => clearTimeout(timer);\n  }, [toast.id, toast.duration, removeToast]);\n\n  const typeClasses = {\n    success: 'toast-success',\n    error: 'toast-error',\n    warning: 'toast-warning',\n    info: 'toast-info',\n  };\n\n  return (\n    <div className={`toast ${typeClasses[toast.type]} mb-2`}>\n      <p className=\"text-sm font-medium\">{toast.message}</p>\n    </div>\n  );\n};\n\nexport const ToastContainer: React.FC = () => {\n  const toasts = useStore((state) => state.ui.toasts);\n\n  if (toasts.length === 0) return null;\n\n  return (\n    <div className=\"fixed top-4 right-4 z-50 space-y-2\">\n      {toasts.map((toast) => (\n        <ToastItem key={toast.id} toast={toast} />\n      ))}\n    </div>\n  );\n};\n","import { useStore } from '@/store';\nimport { ErrorBoundary } from '@/components/common/ErrorBoundary';\nimport { OfflineIndicator } from '@/components/common/OfflineIndicator';\nimport { Header } from '@/components/layout/Header';\nimport { BottomNavigation } from '@/components/layout/BottomNavigation';\nimport { ToastContainer } from '@/components/common/Toast';\nimport { CameraView } from '@/components/camera/CameraView';\nimport { CropView } from '@/components/crop/CropView';\nimport { EnhanceView } from '@/components/enhance/EnhanceView';\nimport { DocumentsView } from '@/components/documents/DocumentsView';\nimport { DocumentDetailView } from '@/components/documents/DocumentDetailView';\nimport { OCRView } from '@/components/ocr/OCRView';\nimport { ExportView } from '@/components/export/ExportView';\n\nfunction App() {\n  const currentView = useStore((state) => state.ui.currentView);\n\n  const renderView = () => {\n    switch (currentView) {\n      case 'camera':\n        return <CameraView />;\n      case 'crop':\n        return <CropView />;\n      case 'enhance':\n        return <EnhanceView />;\n      case 'documents':\n        return <DocumentsView />;\n      case 'detail':\n        return <DocumentDetailView />;\n      case 'ocr':\n        return <OCRView />;\n      case 'export':\n        return <ExportView />;\n      default:\n        return <CameraView />;\n    }\n  };\n\n  return (\n    <ErrorBoundary>\n      <div className=\"flex flex-col h-screen overflow-hidden bg-white\">\n        <Header />\n        <OfflineIndicator />\n        <main className=\"flex-1 overflow-hidden mt-14 mb-16\">\n          {renderView()}\n        </main>\n        <BottomNavigation />\n        <ToastContainer />\n      </div>\n    </ErrorBoundary>\n  );\n}\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom/client';\nimport App from './app/App';\nimport './styles/globals.css';\n\nReactDOM.createRoot(document.getElementById('root')!).render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>\n);\n"],"names":["ErrorBoundary","Component","constructor","props","super","__publicField","this","setState","hasError","error","errorInfo","window","location","reload","state","getDerivedStateFromError","componentDidCatch","onError","render","fallback","className","children","jsxs","jsx","fill","stroke","viewBox","strokeLinecap","strokeLinejoin","strokeWidth","d","Button","onClick","handleReset","variant","handleReload","OfflineIndicator","isOffline","isOnline","setIsOnline","useState","navigator","onLine","useEffect","handleOnline","handleOffline","addEventListener","intervalId","setInterval","async","response","fetch","method","cache","ok","removeEventListener","clearInterval","useOfflineStatus","show","setShow","timer","setTimeout","clearTimeout","role","Header","currentView","useStore","ui","getTitle","BottomNavigation","setCurrentView","view","label","icon","map","item","ToastItem","toast","removeToast","duration","id","success","warning","info","type","message","ToastContainer","toasts","length","App","CameraView","CropView","EnhanceView","DocumentsView","DocumentDetailView","OCRView","ExportView","ReactDOM","createRoot","document","getElementById","React","StrictMode"],"mappings":"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"}